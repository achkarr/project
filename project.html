<head>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
	<script src="https://unpkg.com/mathjs/lib/browser/math.js"></script>

</head>

<body style="padding-bottom: 40px">
	<hr class="dotted line">
	<div class="row mx-md-n12">
	  <div class="col px-md-12"><h4 class="p-3 border bg-light text-center">Final Project</h4></div>
	</div>
	<hr class="dotted line">
	<div class="row mx-md-n12" style="padding-bottom: 30px">
		<div class="col px-md-12">
		 	 <div class="dropdown">
			  	<button style="width: 100%" id="DropDownButton" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Histogram
			  	<span class="caret"></span></button>
				  <ul style="width: 100%" class="dropdown-menu">
				  	<li onclick="Histogram()" style="text-align: center;"><a>Histogram</a></li>
				  	<hr>
				    <li onclick="Bar()" style="text-align: center;"><a>Bar</a></li>
				    <hr>
				    <li onclick="Pie()" style="text-align: center;"><a>Pie</a></li>
				  </ul>
			</div>
		</div>
	</div>
	<div id='myDiv'></div>

	<div id='Chart'></div>

	<h3 style="text-align: center;margin-top: 15px;">Chart Stats</h3>
	<h4 style="text-align: center;margin-top: 15px;" id="Stats">Mean : 0     Median : 0     Mode : 0</h4>
	<div id="Frequency_Container">
		<h3 style="text-align: center;margin-top: 15px;">Item Frequency</h3>
		<div class="row mx-md-n12" style="width: 70%;margin-top: 5%; text-align: center;margin-left: 15.5%;">
			<input id="Input_1" class="px-md-3 text-center" value="1" placeholder="0" />
			<input id="Input_2" class="px-md-3 text-center" value="2" placeholder="0" />
			<input id="Input_3" class="px-md-3 text-center" value="3" placeholder="0" />
			<input id="Input_4" class="px-md-3 text-center" value="4" placeholder="0" />
			<input id="Input_5" class="px-md-3 text-center" value="5" placeholder="0" />
			<input id="Input_6" class="px-md-3 text-center" value="6" placeholder="0" />
		</div>
	</div>

	<div id="Axis_Container">
		<h3 style="text-align: center;margin-top: 15px;">Axis Names</h3>
		<div class="row mx-md-n6" style="width: 70%;margin-top: 5%; text-align: center;margin-left: 45%;">
			<input id="X_Axis" class="px-md-6 text-center" value="X Axis" placeholder="X Axis Name" />
		</div>
		<div class="row mx-md-n6" style="width: 70%;margin-top: 5%; text-align: center;margin-left: 45%;">
			<input id="Y_Axis" class="px-md-6 text-center" value="Y Axis" placeholder="Y Axis Name" />
		</div>
	</div>
	<h3 style="text-align: center;margin-top: 15px;">Item Names</h3>
	<div class="row mx-md-n12" style="width: 70%;margin-top: 5%; text-align: center;margin-left: 15.5%;">
		<input id="Name_1" class="px-md-3 text-center" value="Item 1" placeholder="Item 1" />
		<input id="Name_2" class="px-md-3 text-center" value="Item 2" placeholder="Item 2" />
		<input id="Name_3" class="px-md-3 text-center" value="Item 3" placeholder="Item 3" />
		<input id="Name_4" class="px-md-3 text-center" value="Item 4" placeholder="Item 4" />
		<input id="Name_5" class="px-md-3 text-center" value="Item 5" placeholder="Item 5" />
		<input id="Name_6" class="px-md-3 text-center" value="Item 6" placeholder="Item 6" />
	</div>
	<h3 style="text-align: center;margin-top: 15px;">Item Values</h3>
	<div class="row mx-md-n12" style="width: 70%;margin-top: 5%; text-align: center;margin-left: 15.5%;">
		<input id="Value_1" class="px-md-3 text-center" value="0" placeholder="Value 1" />
		<input id="Value_2" class="px-md-3 text-center" value="10" placeholder="Value 2" />
		<input id="Value_3" class="px-md-3 text-center" value="20" placeholder="Value 3" />
		<input id="Value_4" class="px-md-3 text-center" value="30" placeholder="Value 4" />
		<input id="Value_5" class="px-md-3 text-center" value="40" placeholder="Value 5" />
		<input id="Value_6" class="px-md-3 text-center" value="50" placeholder="Value 6" />
	</div>
	<button style="width: 70%;margin-top: 5%; text-align: center;margin-left: 15%;" type="button" onclick="UpdateGraph();" class="btn btn-primary">Update Graph</button>

	<button style="width: 70%;margin-top: 5%; text-align: center;margin-left: 15%;" id="ExportChart" type="button" class="btn btn-primary">Export </button>
	<button style="width: 70%;margin-top: 5%; text-align: center;margin-left: 15%;" type="button" onclick="Help();" class="btn btn-primary">Help </button>

	<script>
	google.charts.load('current', {'packages':['corechart', 'line', 'bar']});
    google.charts.setOnLoadCallback(DrawPieChart);
    google.charts.setOnLoadCallback(DrawLineChart);
    google.charts.setOnLoadCallback(DrawBarChart);
    var chart1 = null;
	var chart2 = null;
	var chart3 = null;
	var index = 0;
	function LoadStats(numbers) {
	    $("#Stats").html("Mean : " + math.mean(numbers) + "<br>Median : " + math.median(numbers) + "<br>Mode: " + math.mode(numbers));
	}
    function Histogram()
    {
    	index = 0;
    	$("#Frequency_Container").show();
    	$("#Axis_Container").show();
    	$("#DropDownButton").text("Histogram");
    	UpdateGraph();
    }
    function Bar()
    {
    	index = 1;
    	$("#Frequency_Container").hide();
    	$("#Axis_Container").show();
    	$("#DropDownButton").text("Bar");
    	UpdateGraph();
    }
    function Pie()
    {
    	index = 3;
    	$("#Frequency_Container").hide();
    	$("#Axis_Container").hide();
    	$("#DropDownButton").text("Pie");
    	UpdateGraph();
    }
	function Help()
	{
		alert("Welcome to Group #10 GraphInk Co. Software.\n" +
"This page allows you to fill in data, draw graphs, and export those graphs using text boxes and buttons.\n" +
"-Menu Bar: The drop down bar at the top can be clicked to reveal the 3 possible graph types. Then, you can select the graph type you desire.\n" +
"-Graph Display: Below this is the most recently updated graph based on the type and data. View this as a preview before exporting.\n" +
"-Chart Stats: Next is a display of chart statistics. This will allow you to glean important data points from your most current graph.\n" +
"-Item Frequency: These input boxes only occur for the histogram graph type and can be adjusted by typing in the box.\n" +
"-Axis Names: Determine the X and Y Axis titles for your graph. These can be edited by typing in the specified boxes.\n" +
"-Item Names: These will adjust the names of each of your data points. Change these by typing in the boxes.\n" +
"-Item Values: Type whole numbers into these boxes corresponding to the items specified in Item Names.\n" +
"-Update Graph: Click this button to refresh the graph to reflect your most recent data.\n" +
"-Export Graph: Click this button to download an image file of the graph.\n");
	}
	function hasDecimal (num) {
		return !!(num % 1);
	}
	function strlen(x)
	{
		return x.toString().length;
	}

	function DrawPieChart() {
		
	}
	function DrawBarChart() {
		
	}

	function DrawLineChart() {
      
  	}
	function UpdateGraph()
	{
		var Input_1 = document.getElementById("Input_1").value;
		var Input_2 = document.getElementById("Input_2").value;
		var Input_3 = document.getElementById("Input_3").value;
		var Input_4 = document.getElementById("Input_4").value;
		var Input_5 = document.getElementById("Input_5").value;
		var Input_6 = document.getElementById("Input_6").value;

		if ((Input_1 >= 0 && Input_2 >= 0 && Input_3 >= 0 && Input_4 >= 0 && Input_5 >= 0 && Input_6 >= 0) || index != 0)
		{
			if ((strlen(Input_1) <= 5 && strlen(Input_2) <= 5 && strlen(Input_3) <= 5 && strlen(Input_4) <= 5 && strlen(Input_5) <= 5 && strlen(Input_6) <= 5) || index != 0)
			{
				if ((hasDecimal(Input_1) == false && hasDecimal(Input_2) == false && hasDecimal(Input_3) == false && hasDecimal(Input_4) == false && hasDecimal(Input_5) == false && hasDecimal(Input_6) == false) || index != 0)
				{
					var Value_1 = document.getElementById("Value_1").value;
					var Value_2 = document.getElementById("Value_2").value;
					var Value_3 = document.getElementById("Value_3").value;
					var Value_4 = document.getElementById("Value_4").value;
					var Value_5 = document.getElementById("Value_5").value;
					var Value_6 = document.getElementById("Value_6").value;

					if (Value_1 >= 0 && Value_2 >= 0 && Value_3 >= 0 && Value_4 >= 0 && Value_5 >= 0 && Value_6 >= 0)
					{
						if (strlen(Value_1) <= 20 && strlen(Value_2) <= 20 && strlen(Value_3) <= 20 && strlen(Value_4) <= 20 && strlen(Value_5) <= 20 && strlen(Value_6) <= 20)
						{
							if (hasDecimal(Value_1) == false && hasDecimal(Value_2) == false && hasDecimal(Value_3) == false && hasDecimal(Value_4) == false && hasDecimal(Value_5) == false && hasDecimal(Value_6) == false)
							{
								
								var Name_1 = document.getElementById("Name_1").value;
								var Name_2 = document.getElementById("Name_2").value;
								var Name_3 = document.getElementById("Name_3").value;
								var Name_4 = document.getElementById("Name_4").value;
								var Name_5 = document.getElementById("Name_5").value;
								var Name_6 = document.getElementById("Name_6").value;

								

								var NameArray = [Name_1,Name_2,Name_3,Name_4,Name_5,Name_6];
								var InputArray = [Input_1,Input_2,Input_3,Input_4,Input_5,Input_6];
								var ValueArray = [Value_1,Value_2,Value_3,Value_4,Value_5,Value_6];

								
								if (index == 0)
								{
									var Array_Data = [['Data Name', 'Value']];

									var XAxis = document.getElementById("X_Axis").value;
									var YAxis = document.getElementById("Y_Axis").value;

									if (XAxis.length > 0 && YAxis.length > 0)
									{
								      	for (var x =0; x < 6; x++) { 
								      		for (var n =0; n < InputArray[x]; n++) { 
												Array_Data.push ([NameArray[x], ValueArray[x]]);
											}
										}

										  google.charts.load("current", {packages:["corechart"]});
									      google.charts.setOnLoadCallback(drawChart);
									      function drawChart() {
								          var data = google.visualization.arrayToDataTable(Array_Data);
								              

									        var options = {
									          title: 'User inputed graph',
									          legend: { position: 'none' },
									          colors: ['green'],
									          hAxis: {
										        title: XAxis
										      },
										      vAxis: {
										        title: YAxis
										      }
									        };
									        LoadStats(ValueArray);
									        chart1 = new google.visualization.Histogram(document.getElementById('Chart'));
									        chart1.draw(data, options);
								      	}
								    }
								    else
								    	alert("Both axis must contain a name!");
								}
								else if (index == 1)
								{
									var Array_Data = new Array();
									var XAxis = document.getElementById("X_Axis").value;
									var YAxis = document.getElementById("Y_Axis").value;
									var Array_Data = [['Data Name', 'Value']];

									if (XAxis.length > 0 && YAxis.length > 0)
									{
										for (var x =0; x < 6; x++) { 
											Array_Data.push ([NameArray[x], parseInt(ValueArray[x])]);
										}
										var data = google.visualization.arrayToDataTable(Array_Data);

											var options = {
												title: 'User inputted bar chart',
												height: 700,
												legend: { position: 'none' },
												chart: { title: 'User inputted bar chart' },
												bars: 'horizontal', // Required for Material Bar Charts.
												axes: {
													x: {
														0: { side: 'top', label: 'Percentage'} // Top x-axis.
													}
												},
												hAxis: {
											        title: XAxis
											      },
											      vAxis: {
											        title: YAxis
											      },
												bar: { groupWidth: "90%" }
											};
										  LoadStats(ValueArray);
									      chart2 = new google.visualization.BarChart(document.getElementById('Chart'));
									      chart2.draw(data, options);
								    }
								    else
								    	alert("Both axis must contain a name!");
								}
								else if (index == 3)
								{
									/*var Array_Data = [['Item', 'Value']];

									for (var x =0; x < 6; x++) { 
										Array_Data.push([NameArray[x], ValueArray[x]]);
									}

									var data = google.visualization.arrayToDataTable(Array_Data);*/
									var data = google.visualization.arrayToDataTable([
							          ['Item', 'Value'],
							          [NameArray[0], ValueArray[0] / 100],
							          [NameArray[1], ValueArray[1] / 100],
							          [NameArray[2], ValueArray[2] / 100],
							          [NameArray[3], ValueArray[3] / 100],
							          [NameArray[4], ValueArray[4] / 100],
							          [NameArray[5], ValueArray[5] / 100],
							        ]);


									var options = {
										title: 
										'User inputted pie chart',
										'height': 700
									};
									LoadStats(ValueArray);
									chart3 = new google.visualization.PieChart(document.getElementById('Chart'));
									chart3.draw(data, options);							    
								}
						    }
					      	else
				        		alert("Item value must be a whole number!");
			        	}
				      	else
			        		alert("Item value can not exceed length 20!");
			        }
			        else
			        	alert("Item value must be non negative!");
		      	}
		      	else
	        		alert("Frequency must be a whole number!");
        	}
	      	else
        		alert("Frequency can not exceed length 5!");
        }
        else
        	alert("Frequency must be non negative!");
	}
	UpdateGraph();

								var btnSave = document.getElementById('ExportChart');
								btnSave.addEventListener('click', function () {
									var doc = new jsPDF({
								        orientation: 'landscape',
								    });
									if (index == 0)
									{
									    doc.addImage(chart1.getImageURI(), 'JPEG', 10, 10, 300, 40);
									    doc.save('chart.pdf');
									}
									else if (index == 1)
									{
									    doc.addImage(chart2.getImageURI(), 'JPEG', 10, 10, 300, 140);
									    doc.save('chart.pdf');
									}
									else if (index == 3)
									{
									    doc.addImage(chart3.getImageURI(), 'JPEG', 10, 10, 300, 120);
									    doc.save('chart.pdf');
									}
							    }, false);
	</script>

</body>